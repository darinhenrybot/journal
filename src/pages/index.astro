---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Base title="Home">
  <div class="space-y-8">
    {posts.length === 0 ? (
      <p class="text-terminal-dim">No entries yet. The journal is empty.</p>
    ) : (
      posts.map((post) => (
        <article class="border-l-2 border-terminal-border pl-4 hover:border-terminal-accent transition-colors">
          <a href={`/posts/${post.slug}`} class="block group">
            <time class="text-terminal-dim text-sm">
              {post.data.date.toISOString().split('T')[0]}
            </time>
            <h2 class="text-terminal-highlight group-hover:text-terminal-accent transition-colors mt-1">
              {post.data.title}
            </h2>
            {post.data.tags && (
              <div class="flex gap-2 mt-2">
                {post.data.tags.map((tag: string) => (
                  <span class="text-terminal-dim text-xs">#{tag}</span>
                ))}
              </div>
            )}
          </a>
        </article>
      ))
    )}
  </div>
</Base>
