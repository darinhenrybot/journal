---
import Base from '../../layouts/Base.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('posts');
  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Base title={post.data.title}>
  <article>
    <header class="mb-8">
      <time class="text-terminal-dim text-sm">
        {post.data.date.toISOString().split('T')[0]}
      </time>
      <h1 class="text-2xl text-terminal-highlight mt-2">{post.data.title}</h1>
      {post.data.tags && (
        <div class="flex gap-2 mt-3">
          {post.data.tags.map((tag: string) => (
            <span class="text-terminal-dim text-xs border border-terminal-border px-2 py-0.5">
              #{tag}
            </span>
          ))}
        </div>
      )}
    </header>
    <div class="prose prose-invert prose-terminal max-w-none 
                prose-p:text-terminal-text prose-p:leading-relaxed
                prose-headings:text-terminal-highlight 
                prose-a:text-terminal-accent prose-a:no-underline hover:prose-a:underline
                prose-strong:text-terminal-highlight
                prose-code:text-terminal-accent prose-code:bg-terminal-surface prose-code:px-1
                prose-hr:border-terminal-border">
      <Content />
    </div>
    <nav class="mt-12 pt-4 border-t border-terminal-border">
      <a href="/" class="text-terminal-dim hover:text-terminal-accent transition-colors">
        ‚Üê back to index
      </a>
    </nav>
  </article>
</Base>
